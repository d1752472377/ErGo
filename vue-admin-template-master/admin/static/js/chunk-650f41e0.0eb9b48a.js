(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-650f41e0"],{"32f0":function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"h",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return m}));var n=a("5530"),i=a("b775");function r(e){return Object(i["a"])({url:"/schedule/jobs",method:"GET",params:Object(n["a"])({},e)})}function l(e,t){return Object(i["a"])({url:"/schedule/job/status",method:"PUT",params:{jobId:e,status:t}})}function o(e){return Object(i["a"])({url:"/schedule/job/run",method:"POST",params:{jobId:e}})}function s(e){return Object(i["a"])({url:"/schedule/job",method:"DELETE",params:{jobId:e}})}function c(e){return Object(i["a"])({url:"/schedule/job",method:"POST",data:Object(n["a"])({},e)})}function u(e){return Object(i["a"])({url:"/schedule/job",method:"PUT",data:Object(n["a"])({},e)})}function d(e){return Object(i["a"])({url:"/schedule/job/logs",method:"GET",params:Object(n["a"])({},e)})}function m(e){return Object(i["a"])({url:"/schedule/job/log",method:"DELETE",params:{logId:e}})}},"4c81":function(e,t,a){"use strict";a("7f36")},5905:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"执行时间"}},[a("DateTimeRangePicker",{attrs:{date:e.queryInfo.date,setDate:e.setDate}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("el-table",{attrs:{data:e.logList}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"日志ID",prop:"logId",width:"80"}}),a("el-table-column",{attrs:{label:"任务ID",prop:"jobId",width:"80"}}),a("el-table-column",{attrs:{label:"Bean",prop:"beanName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"方法名",prop:"methodName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"结果",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?a("el-tag",{attrs:{size:"small",effect:"dark"}},[e._v("成功")]):a("el-tag",{attrs:{size:"small",effect:"dark",type:"danger"}},[e._v("失败")])]}}])}),a("el-table-column",{attrs:{label:"执行耗时",prop:"times",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(t.row.times)+"ms")])]}}])}),a("el-table-column",{attrs:{label:"执行时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(t.row.createTime)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-view",size:"mini"},on:{click:function(a){return e.showDetail(t.row)}}},[e._v("查看详情")]),a("el-popconfirm",{attrs:{title:"确定删除吗？",icon:"el-icon-delete",iconColor:"red"},on:{onConfirm:function(a){return e.deleteJobLogByLogId(t.row.logId)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-sizes":[10,20,30,50],"page-size":e.queryInfo.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"日志详情","append-to-body":"",top:"20px",width:"80%",visible:e.detailDialogVisible,"destroy-on-close":""},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("el-form",{ref:"detailFormRef",attrs:{model:e.detail,"label-width":"120px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"日志ID："}},[e._v(e._s(e.detail.logId))]),a("el-form-item",{attrs:{label:"任务ID："}},[e._v(e._s(e.detail.jobId))]),a("el-form-item",{attrs:{label:"执行耗时："}},[e._v(e._s(e.detail.times)+" 毫秒")]),a("el-form-item",{attrs:{label:"执行时间："}},[e._v(e._s(e._f("dateFormat")(e.detail.createTime)))])],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Bean："}},[e._v(e._s(e.detail.beanName))]),a("el-form-item",{attrs:{label:"方法名："}},[e._v(e._s(e.detail.methodName))]),a("el-form-item",{attrs:{label:"参数："}},[e._v(e._s(e.detail.params))]),a("el-form-item",{attrs:{label:"任务结果："}},[e.detail.status?a("el-tag",{attrs:{size:"mini",effect:"dark"}},[e._v("成功")]):a("el-tag",{attrs:{size:"mini",effect:"dark",type:"danger"}},[e._v("失败")])],1)],1),a("el-form-item",{attrs:{label:"异常信息："}},[a("div",{staticClass:"match-braces rainbow-braces"},[a("pre",[e._v("\t\t\t\t\t\t\t\t"),a("code",{staticClass:"language-java"},[e._v(e._s(e.detail.error))]),e._v("\n\t\t\t\t\t\t\t")])])])],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.detailDialogVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},i=[],r=a("5530"),l=a("32f0"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-date-picker",{attrs:{type:"datetimerange",align:"center",size:"small","unlink-panels":"","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"start-placeholder":"开始时间","end-placeholder":"结束时间","range-separator":"-"},on:{change:function(t){return e.setDate(e.thisDate)}},model:{value:e.thisDate,callback:function(t){e.thisDate=t},expression:"thisDate"}})},s=[],c={name:"DateTimeRangePicker",props:{date:{required:!0},setDate:{type:Function,required:!0}},data:function(){return{thisDate:this.date,pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,a=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),a.setHours(23),a.setMinutes(59),a.setSeconds(59),e.$emit("pick",[t,a])}},{text:"昨天",onClick:function(e){var t=new Date,a=new Date,n=new Date;a.setTime(t.getTime()-864e5),n.setTime(t.getTime()-864e5),a.setHours(0),a.setMinutes(0),a.setSeconds(0),n.setHours(23),n.setMinutes(59),n.setSeconds(59),e.$emit("pick",[a,n])}},{text:"最近三天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e5),e.$emit("pick",[a,t])}},{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}]}}}},u=c,d=a("2877"),m=Object(d["a"])(u,o,s,!1,null,"199a1e4e",null),f=m.exports,b={name:"ScheduleJobLog",components:{DateTimeRangePicker:f},data:function(){return{queryInfo:{date:[],pageNum:1,pageSize:10},logList:[],total:0,detailDialogVisible:!1,detail:{}}},created:function(){this.getData()},methods:{getData:function(){var e=this,t=Object(r["a"])({},this.queryInfo);t.date&&2===t.date.length&&(t.date=t.date[0]+","+t.date[1]),Object(l["f"])(t).then((function(t){e.logList=t.data.list,e.total=t.data.total}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getData()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getData()},showDetail:function(e){this.detail=Object(r["a"])({},e),this.detail.error&&(this.detail.error="\n"+this.detail.error,this.$nextTick((function(){Prism.highlightAll()}))),this.detailDialogVisible=!0},deleteJobLogByLogId:function(e){var t=this;Object(l["c"])(e).then((function(e){t.msgSuccess(e.msg),t.getData()}))},search:function(){this.queryInfo.pageNum=1,this.queryInfo.pageSize=10,this.getData()},setDate:function(e){this.queryInfo.date=e}},filters:{dateFormat:function(e){if(null!=e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var r=t.getHours();r=r<10?"0"+r:r;var l=t.getMinutes();l=l<10?"0"+l:l;var o=t.getSeconds();return o=o<10?"0"+o:o,a+"-"+n+"-"+i+" "+r+":"+l+":"+o}}}},h=b,p=(a("4c81"),Object(d["a"])(h,n,i,!1,null,"3a1a6949",null));t["default"]=p.exports},"7f36":function(e,t,a){}}]);